<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Bookshelf — 2024</title><style>:root{--color:#666666;--gray:lightgray;--accent-gray:whitesmoke;--primary-color:#6261d0;--primary-dark-color:#3b3ac4;--background:#ffffff}@media (prefers-color-scheme:dark){:root{--color:lightgray;--gray:gray;--accent-gray:#454545;--primary-color:#b1a8ff;--primary-dark-color:#ccc7ff;--background:#333333}}main{padding:2rem 1rem;transition:padding .2s ease}body{font-family:system,-apple-system,".SFNSText-Regular","San Francisco",Roboto,"Segoe UI","Helvetica Neue","Lucida Grande",sans-serif;color:var(--color);margin:0;background-color:var(--background);background-size:90px 90px;background-image:linear-gradient(to right,transparent 60px,var(--accent-gray) 60px 61px,transparent 61px),linear-gradient(to bottom,transparent 40px,var(--accent-gray) 40px 41px,transparent 41px)}h1{font-size:2.25rem;font-weight:400}h2{font-size:2rem;font-weight:400}h1,h2{margin:0 0 1rem}a{color:var(--primary-color);text-decoration:underline;transition:color .2s ease}a:hover{color:var(--primary-dark-color)}a:focus{outline:0}header a:focus{box-shadow:0 0 0 2px var(--accent-gray),0 0 4px 4px #ff1493}header [data-state=active]:focus{box-shadow:0 0 0 2px var(--accent-gray),0 0 4px 4px #ff1493,0 0 0 4px var(--accent-gray),-5px 0 0 3px var(--primary-color)}main a:focus{box-shadow:0 0 0 2px var(--background),0 0 4px 4px #ff1493}main a:focus:hover{box-shadow:0 0 0 2px var(--background),0 0 4px 4px #ff1493}[data-state=active]{box-shadow:0 0 0 4px var(--accent-gray),-5px 0 0 3px var(--primary-color)}li,p{line-height:1.3;font-size:1.25rem}.bold{font-weight:700}.skip-link{position:absolute;top:0;left:0;z-index:99}.skip-link:not(:focus){border:0;clip:rect(0 0 0 0);height:auto;margin:0;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.button{background:var(--primary-color);color:var(--background);padding:16px 24px;border:4px solid var(--primary-color)}.button:hover{background:var(--primary-dark-color);color:var(--background);text-decoration:none;border:4px solid var(--primary-dark-color)}.button:focus{outline:0;box-shadow:inset 0 0 0 4px var(--background)}header{padding:1rem;align-items:center;background:var(--accent-gray)}header,nav.primary{display:flex;justify-content:space-between;flex-wrap:wrap}header a{font-family:Futura,Helvetica,Arial,sans-serif;text-transform:uppercase;font-size:1.25rem;text-decoration:none;width:100%}header a:hover{text-decoration:underline}nav.primary ul{display:flex;flex-wrap:wrap;margin:0;padding:0;justify-content:flex-end}nav li{list-style-type:none}nav.primary li{margin:0;width:100%;padding-top:.5rem}article h2{margin:0 0 1rem}.wrapper{display:flex;flex-direction:column}.wrapper img{max-width:200px}.text{display:flex;flex-direction:column}.text p:first-child{margin:1rem 0 .5rem}.text p{margin:.5rem 0}ul{margin:0;padding:0 1rem}li{margin:.5rem 0}.work{border:1px solid var(--gray);padding:1rem;border-radius:8px;background:var(--background);margin-top:2rem}.work:first-of-type{margin-top:0}.donut{margin-top:2rem}.bookContainer{display:grid;grid-template-columns:1fr;width:100%}.sidebar ul{display:flex;flex-wrap:wrap;padding:0}.sidebar li{margin:0 0 .5rem;margin-inline-end:.5rem}.year{margin:1.5rem 0 0}.year h2{margin:0 1rem 0 0}.year .info{display:flex;align-items:baseline;margin:0 0 1rem}.bookshelf h3{margin:1rem 0 0}.bookshelf h4{margin:.33rem 0 .67rem;font-weight:400;font-style:italic}.bookshelf p{margin:.33rem 0 0;font-size:1rem}.books{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.book{display:block;margin-block-end:16px}.book:nth-of-type(odd){margin-inline-end:8px}.book:nth-of-type(2n){margin-inline-start:8px}.hidden{display:none}.book:focus-within img{box-shadow:0 0 0 4px var(--background),0 0 4px 8px #ff1493}.book a:focus,a:focus:hover{box-shadow:none}.cover img{display:block;object-fit:contain;max-width:100%;height:250px}.tag{border:none;margin:0;padding:0;display:flex;flex-wrap:wrap}summary{font-size:1.25rem;width:fit-content;cursor:pointer;margin:1rem 0 0}summary:hover{box-shadow:0 0 0 2px var(--background),0 0 4px 4px #ff1493}summary:focus{outline:0;box-shadow:0 0 0 2px var(--background),0 0 4px 4px #ff1493}.filter legend{font-weight:700;padding:1rem 0 .5rem;display:flex;width:100%;justify-content:space-between;align-items:flex-end;line-height:2.3rem}.clear{font-family:inherit;font-size:100%;line-height:1.15;margin:0;overflow:visible;text-transform:none;background:var(--background);color:var(--color);border:1px solid var(--color);padding:8px 16px;border-radius:4px;margin:0 0 0 16px}.clear:hover{box-shadow:inset 0 0 0 2px var(--color)}.clear:focus{outline:0;box-shadow:0 0 4px 4px #ff1493}.clear:focus:hover{box-shadow:0 0 4px 4px #ff1493,inset 0 0 0 2px var(--color)}.tag label{align-items:center;background-color:var(--primary-color);border-radius:4px;color:var(--background);cursor:pointer;display:flex;font-family:Futura,Helvetica,Arial,sans-serif;justify-content:space-between;padding:8px;text-align:center;text-transform:uppercase;width:100%;margin:4px 0 0}.tag input:focus+label{box-shadow:0 0 4px 4px #ff1493}.tag input:hover+label{box-shadow:inset 0 0 0 2px var(--primary-color),inset 0 0 0 4px var(--background)}.tag input:focus:hover+label{box-shadow:0 0 4px 4px #ff1493,inset 0 0 0 2px var(--primary-color),inset 0 0 0 4px var(--background)}.tag input+label::after,.tag input+label::before{content:"";width:24px;height:16px;display:block}.tag input:checked+label::after{content:url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='none' stroke='white' stroke-linecap='round' stroke-width='2' d='M2 14L14 2M14 14L2 2'%3E%3C/path%3E%3C/svg%3E");width:16px;height:16px;display:block;margin-left:8px}@media (prefers-color-scheme:dark){.tag input:checked+label::after{content:url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='none' stroke='black' stroke-linecap='round' stroke-width='2' d='M2 14L14 2M14 14L2 2'%3E%3C/path%3E%3C/svg%3E");opacity:67%}}.tag input{clip:rect(0,0,0,0);word-wrap:normal;border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}@media (min-width:500px){nav.primary li{padding:0 0 0 1rem;width:unset}header [data-state=active]:focus{box-shadow:0 0 0 2px var(--accent-gray),0 0 4px 4px #ff1493,0 -4px 0 8px var(--accent-gray),0 0 0 8px var(--primary-color)}[data-state=active]{box-shadow:0 -4px 0 8px var(--accent-gray),0 0 0 8px var(--primary-color)}header a{width:unset}section.bookshelf{max-width:1400px}.bookContainer{display:grid;grid-template-columns:auto 1fr;width:100%}.sidebar ul{flex-direction:column}.sidebar li:first-of-type{margin:0 0 .5rem}.sidebar li{margin:.5rem 0;margin-inline-end:2rem}.year:not(:first-of-type){margin:2rem 0 0}.tag label{width:unset;justify-content:left;font-size:.8rem;margin:4px}.book:nth-of-type(2n),.book:nth-of-type(odd){margin-inline-end:16px}.book:nth-of-type(2n){margin-inline-start:unset}summary{margin:0}}@media (min-width:600px){section{padding:0 2em;margin:0 auto;max-width:600px}header{padding:1rem}header a{font-size:1.25rem;width:unset}.wrapper{display:grid;grid-template-columns:200px 1fr}.wrapper a{height:fit-content}.text p:first-child{margin:0}.work{padding:1.5rem}.books{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}.cover img{height:270px}}</style><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/x-icon" href="/assets/favicon.ico"><meta name="author" content="Kim Niedermaier"><meta name="description" content="Kim's corner of the internet, a garden to tend, and a place for exploration"><meta itemprop="name" content="Kim Niedermaier"></head><body><a class="skip-link button" href="#main-content">Skip to content</a><header role="banner" class="site-head"><a href="/" aria-label="Kim Niedermaier | Home">Kim Niedermaier</a><nav aria-label="Primary navigaton" class="primary"><ul><li><a href="/bookshelf" data-state="active">Bookshelf</a></li><li><a href="/talks">Talks</a></li><li><a href="/work">Work</a></li></ul></nav></header><main tabindex="-1" id="main-content"><section class="bookshelf"><h1>Bookshelf — 2024</h1><div class="bookContainer"><nav class="sidebar"><ul><li><a href="/bookshelf/">All</a></li><li><a href="/bookshelf/2024/">2024</a></li><li><a href="/bookshelf/2023/">2023</a></li><li><a href="/bookshelf/2022/">2022</a></li><li><a href="/bookshelf/2021/">2021</a></li><li><a href="/bookshelf/2020/">2020</a></li><li><a href="/bookshelf/2019/">2019</a></li><li><a href="/bookshelf/2018/">2018</a></li><li><a href="/bookshelf/2017/">2017</a></li><li><a href="/bookshelf/2016/">2016</a></li></ul></nav><div><details><summary>Filter books by tags:</summary><form class="filter"><fieldset class="tag"><legend>Select tags <button class="clear hidden">Clear selection</button></legend><input type="checkbox" id="coming-of-age" value="coming-of-age" name="filter"> <label for="coming-of-age">coming of age</label> <input type="checkbox" id="cozy-mystery" value="cozy-mystery" name="filter"> <label for="cozy-mystery">cozy mystery</label> <input type="checkbox" id="creative-liberties" value="creative-liberties" name="filter"> <label for="creative-liberties">creative liberties</label> <input type="checkbox" id="espionage" value="espionage" name="filter"> <label for="espionage">espionage</label> <input type="checkbox" id="essays" value="essays" name="filter"> <label for="essays">essays</label> <input type="checkbox" id="family-dynamics" value="family-dynamics" name="filter"> <label for="family-dynamics">family dynamics</label> <input type="checkbox" id="feminism" value="feminism" name="filter"> <label for="feminism">feminism</label> <input type="checkbox" id="friendship" value="friendship" name="filter"> <label for="friendship">friendship</label> <input type="checkbox" id="graphic-novel" value="graphic-novel" name="filter"> <label for="graphic-novel">graphic novel</label> <input type="checkbox" id="historical-fiction" value="historical-fiction" name="filter"> <label for="historical-fiction">historical fiction</label> <input type="checkbox" id="humourous" value="humourous" name="filter"> <label for="humourous">humourous</label> <input type="checkbox" id="in-translation" value="in-translation" name="filter"> <label for="in-translation">in translation</label> <input type="checkbox" id="insufferable-characters" value="insufferable-characters" name="filter"> <label for="insufferable-characters">insufferable characters</label> <input type="checkbox" id="lgbtq" value="lgbtq" name="filter"> <label for="lgbtq">LGBTQ</label> <input type="checkbox" id="magical-realism" value="magical-realism" name="filter"> <label for="magical-realism">magical realism</label> <input type="checkbox" id="memoir" value="memoir" name="filter"> <label for="memoir">memoir</label> <input type="checkbox" id="nonfiction" value="nonfiction" name="filter"> <label for="nonfiction">nonfiction</label> <input type="checkbox" id="novella" value="novella" name="filter"> <label for="novella">novella</label> <input type="checkbox" id="pdx-book-fest" value="pdx-book-fest" name="filter"> <label for="pdx-book-fest">PDX Book Festival</label> <input type="checkbox" id="politics" value="politics" name="filter"> <label for="politics">politics</label> <input type="checkbox" id="rom-com" value="rom-com" name="filter"> <label for="rom-com">Rom-com</label> <input type="checkbox" id="romance" value="romance" name="filter"> <label for="romance">romance</label> <input type="checkbox" id="saga" value="saga" name="filter"> <label for="saga">saga</label> <input type="checkbox" id="sci-fi-fantasy" value="sci-fi-fantasy" name="filter"> <label for="sci-fi-fantasy">Sci-fi &amp; Fantasy</label> <input type="checkbox" id="short-stories" value="short-stories" name="filter"> <label for="short-stories">short stories</label> <input type="checkbox" id="sports" value="sports" name="filter"> <label for="sports">sports</label> <input type="checkbox" id="strong-sense-of-place" value="strong-sense-of-place" name="filter"> <label for="strong-sense-of-place">strong sense of place</label> <input type="checkbox" id="strongly-consider-reading" value="strongly-consider-reading" name="filter"> <label for="strongly-consider-reading">strongly consider reading</label> <input type="checkbox" id="technology" value="technology" name="filter"> <label for="technology">technology</label> <input type="checkbox" id="urban-planning" value="urban-planning" name="filter"> <label for="urban-planning">urban planning</label> <input type="checkbox" id="ya" value="ya" name="filter"> <label for="ya">YA</label></fieldset></form></details><article class="year"><div class="info"><h2 id="2024">2024</h2><p class="bold">22 books</p></div><div class="books"><div class="book" data-tags="lgbtq sports romance"><a href="https://bookshop.org/p/books/cleat-cute-meryl-wilsner/19473640"><div class="cover"><img src="https://images.isbndb.com/covers/33/09/9781250873309.jpg" loading="lazy" alt="Cover of Cleat Cute"></div></a><h3>Cleat Cute</h3><h4>A Novel</h4><p>Meryl Wilsner</p></div><div class="book" data-tags="memoir nonfiction lgbtq technology"><a href="https://bookshop.org/p/books/burn-book-a-tech-love-story-kara-swisher/20388372"><div class="cover"><img src="https://images.isbndb.com/covers/38/91/9781982163891.jpg" loading="lazy" alt="Cover of Burn Book"></div></a><h3>Burn Book</h3><h4>A Tech Love Story</h4><p>Kara Swisher</p></div><div class="book" data-tags="saga lgbtq strong-sense-of-place family-dynamics historical-fiction"><a href="https://bookshop.org/p/books/still-life-sarah-winman/16311667"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780593330753-M.jpg" loading="lazy" alt="Cover of Still Life"></div></a><h3>Still Life</h3><h4>A Novel</h4><p>Sarah Winman</p></div><div class="book" data-tags="novella lgbtq strong-sense-of-place family-dynamics historical-fiction"><a href="https://bookshop.org/p/books/the-road-to-dalton/18900738"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781609459260-M.jpg" loading="lazy" alt="Cover of The Road to Dalton"></div></a><h3>The Road to Dalton</h3><h4>A Novel</h4><p>Shannon Bowring</p></div><div class="book" data-tags="coming-of-age family-dynamics"><a href="https://bookshop.org/p/books/dear-edward-ann-napolitano/16071619"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781984854780-M.jpg" loading="lazy" alt="Cover of Dear Edward"></div></a><h3>Dear Edward</h3><h4>A Novel</h4><p>Ann Napolitano</p></div><div class="book" data-tags="nonfiction"><a href="https://bookshop.org/p/books/there-s-no-such-thing-as-bad-weather-a-scandinavian-mom-s-secrets-for-raising-healthy-resilient-and-confident-kids-from-friluftsliv-to-hygge-linda-akeson-mcgurk/6766163"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781501143632-M.jpg" loading="lazy" alt="Cover of There’s No Such Thing as Bad Weather"></div></a><h3>There’s No Such Thing as Bad Weather</h3><h4>A Scandinavian Mom’s Secrets for Raising Healthy, Resilient, and Confident Kids (from Friluftsliv to Hygge)</h4><p>Linda Åkeson McGurk</p></div><div class="book" data-tags="family-dynamics"><a href="https://bookshop.org/p/books/seating-arrangements-maggie-shipstead/9788687"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780307743954-M.jpg" loading="lazy" alt="Cover of Seating Arrangements"></div></a><h3>Seating Arrangements</h3><h4>A Novel</h4><p>Maggie Shipstead</p></div><div class="book" data-tags="family-dynamics lgbtq short-stories humourous strong-sense-of-place"><a href="https://bookshop.org/p/books/dearborn-ghassan-zeineddine/19726594"><div class="cover"><img src="https://images.isbndb.com/covers/02/94/9781959030294.jpg" loading="lazy" alt="Cover of Dearborn by Ghassen Zeineddine"></div></a><h3>Dearborn by Ghassen Zeineddine</h3><h4>Stories</h4><p>Ghassan Zeineddine</p></div><div class="book" data-tags="coming-of-age strong-sense-of-place"><a href="https://bookshop.org/p/books/glaciers-alexis-m-smith/8964723"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781935639206-M.jpg" loading="lazy" alt="Cover of Glaciers"></div></a><h3>Glaciers</h3><h4>A Novel</h4><p>Alexis M. Smith</p></div><div class="book" data-tags="coming-of-age family-dynamics feminism historical-fiction strong-sense-of-place"><a href="https://bookshop.org/p/books/great-circle-maggie-shipstead/16104014"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780525656975-M.jpg" loading="lazy" alt="Cover of Great Circle"></div></a><h3>Great Circle</h3><h4>A Novel</h4><p>Maggie Shipstead</p></div><div class="book" data-tags="short-stories friendship coming-of-age"><a href="https://bookshop.org/p/books/what-you-are-looking-for-is-in-the-library-original-michiko-aoyama/19720383"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781335005625-M.jpg" loading="lazy" alt="Cover of What You Are Looking For Is in the Library"></div></a><h3>What You Are Looking For Is in the Library</h3><h4>A Novel</h4><p>Michiko Aoyama</p></div><div class="book" data-tags="lgbtq strong-sense-of-place saga"><a href="https://bookshop.org/p/books/the-great-believers-rebecca-makkai/12291073"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780735223530-M.jpg" loading="lazy" alt="Cover of The Great Believers"></div></a><h3>The Great Believers</h3><h4>A Novel</h4><p>Rebecca Makkai</p></div><div class="book" data-tags="historical-fiction family-dynamics strong-sense-of-place"><a href="https://bookshop.org/p/books/someone-alice-mcdermott/15554245"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781250055361-M.jpg" loading="lazy" alt="Cover of Someone by "></div></a><h3>Someone by</h3><h4>A Novel</h4><p>Alice McDermott</p></div><div class="book" data-tags="sci-fi-fantasy"><a href="https://bookshop.org/p/books/sea-of-tranquility-emily-st-john-mandel/17768221"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780593321447-M.jpg" loading="lazy" alt="Cover of Sea of Tranquility"></div></a><h3>Sea of Tranquility</h3><h4>A Novel</h4><p>Emily St. John Mandel</p></div><div class="book" data-tags="strong-sense-of-place"><a href="https://bookshop.org/p/books/the-sentence-louise-erdrich/17388336"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780062671127-M.jpg" loading="lazy" alt="Cover of The Sentence"></div></a><h3>The Sentence</h3><h4>A Novel</h4><p>Louise Erdrich</p></div><div class="book" data-tags="coming-of-age lgbtq romance historical-fiction strong-sense-of-place"><a href="https://bookshop.org/p/books/sunburn-chloe-michellq-howarth/19785658"><div class="cover"><img src="https://images.isbndb.com/covers/84/12/9780857308412.jpg" loading="lazy" alt="Cover of Sunburn"></div></a><h3>Sunburn</h3><p>Chloe Michelle Howarth</p></div><div class="book" data-tags="nonfiction"><a href="https://bookshop.org/p/books/the-gentle-art-of-swedish-death-cleaning-how-to-free-yourself-and-your-family-from-a-lifetime-of-clutter-margareta-magnusson/18767643"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781501173240-M.jpg" loading="lazy" alt="Cover of The Gentle Art of Swedish Death Cleaning"></div></a><h3>The Gentle Art of Swedish Death Cleaning</h3><h4>How to Free Yourself and Your Family from a Lifetime of Clutter</h4><p>Margareta Magnusson</p></div><div class="book" data-tags="friendship romance"><a href="https://bookshop.org/p/books/the-friend-sigrid-nunez/16465773"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780735219441-M.jpg" loading="lazy" alt="Cover of The Friend"></div></a><h3>The Friend</h3><h4>A Novel</h4><p>Sigrid Nunez</p></div><div class="book" data-tags="historical-fiction saga family-dynamics strong-sense-of-place strongly-consider-reading"><a href="https://bookshop.org/p/books/pachinko-national-book-award-finalist-lee-min-jin/8324329"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781455563937-M.jpg" loading="lazy" alt="Cover of Pachinko"></div></a><h3>Pachinko</h3><p>Min Jin Lee</p></div><div class="book" data-tags="strong-sense-of-place family-dynamics romance saga"><a href="https://bookshop.org/p/books/hello-beautiful/18916008"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9780593243732-M.jpg" loading="lazy" alt="Cover of Hello Beautiful"></div></a><h3>Hello Beautiful</h3><h4>A Novel</h4><p>Ann Napolitano</p></div><div class="book" data-tags="nonfiction"><a href="https://bookshop.org/p/books/the-swedish-art-of-aging-exuberantly-life-wisdom-from-someone-who-will-probably-die-before-you-margareta-magnusson/18265383"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781982196622-M.jpg" loading="lazy" alt="Cover of The Swedish Art of Aging Exuberantly"></div></a><h3>The Swedish Art of Aging Exuberantly</h3><h4>Life Wisdom from Someone Who Will (Probably) Die Before You (The Swedish Art of Living &amp; Dying)</h4><p>Margareta Magnusson</p></div><div class="book" data-tags="nonfiction feminism"><a href="https://bookshop.org/p/books/glossy-ambition-beauty-and-the-inside-story-of-emily-weiss-s-glossier/18860199"><div class="cover"><img src="https://covers.openlibrary.org/b/isbn/9781982190606-M.jpg" loading="lazy" alt="Cover of Glossy"></div></a><h3>Glossy</h3><h4>Ambition, Beauty, and the Inside Story of Emily Weiss&#39;s Glossier</h4><p>Marisa Meltzer</p></div></div></article></div></div><script>const form = document.querySelector("form");
const tags = document.querySelectorAll(".tag input");
const books = document.querySelectorAll(".book");
const totalBooks = document.querySelectorAll(".info p");
const clearButtonSelector = "button.clear";
const clearButton = document.querySelector(clearButtonSelector);

const getCurrentUrl = () => {
  const { host, pathname, protocol } = window.location;
  return `${protocol}//${host}${pathname}`;
};

const updateFilterParams = () => {
  const activeTags = [...tags]
    .filter((tag) => tag.checked)
    .map((tag) => ["filter", tag.id]);
  const params = new URLSearchParams(activeTags);
  const currentUrl = getCurrentUrl();
  const newUrl = `${currentUrl}?${params.toString()}`;
  window.history.pushState({ path: newUrl }, "", newUrl);
};

const updateBooks = () => {
  const checkedTags = [...tags].filter((tag) => tag.checked);

  books.forEach((book) => {
    if (checkedTags.length === 0) {
      clearButton.classList.add("hidden");
      book.classList.remove("hidden");
    } else {
      // display clearSelection button
      clearButton.classList.remove("hidden");
      const matchedFilters = checkedTags.filter((tag) => {
        return book.dataset.tags.includes(tag.value);
      });

      const matchesAllFilters = matchedFilters.length === checkedTags.length;
      if (matchesAllFilters) {
        book.classList.remove("hidden");
      } else {
        book.classList.add("hidden");
      }
    }
  });
};

const updateTotals = () => {
  totalBooks.forEach((yearlyTotal) => {
    const yearElement = yearlyTotal.parentElement.parentElement;
    const numberOfBooks =
      yearElement.querySelectorAll(".book:not(.hidden)").length;
    const plural = numberOfBooks === 1 ? "" : "s";
    yearlyTotal.textContent = `${numberOfBooks} book${plural}`;
  });
};

const clearSelection = () => {
  tags.forEach((tag) => (tag.checked = false));
  clearButton.classList.add("hidden");
  books.forEach((book) => book.classList.remove("hidden"));
  updateTotals();
  const newUrl = getCurrentUrl();
  window.history.pushState({ path: newUrl }, "", newUrl);
};

clearButton.addEventListener("click", (e) => {
  e.preventDefault();
  clearSelection();
});

clearButton.addEventListener("touchstart", (e) => {
  e.preventDefault();
  clearSelection();
});

form.addEventListener("change", () => {
  updateBooks();
  updateTotals();
  updateFilterParams();
});

window.addEventListener("load", () => {
  const searchParams = new URLSearchParams(window.location.search);
  const activFilters = searchParams.getAll("filter");

  // if there are query params passed in, update the active filters selection
  if (activFilters.length > 0) {
    // open details
    document.querySelector(".bookContainer details").open = "true";
    // check relevant inputs
    activFilters.forEach((af) => {
      [...tags].find((tag) => tag.id === af).checked = "true";
    });
    updateBooks();
    updateTotals();
  }
});</script></section></main></body></html>